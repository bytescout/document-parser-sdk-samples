---
templateVersion: 1
templatePriority: 1
sourceId: StackOverflow Invoice
detectionRules:
  keywords:
    - Stack Exchange, Inc.
    - Invoice
    - billing@stackoverflow.com
fields:
  invoiceId: 
    expression: 'INVOICE NO (\w-\d+-\d+)'
  dateIssued: 
    expression: '(?s)ORDER DATE.*\s+(\w+ \d{1,2}, \d{4})\s+ADDRESS'
    type: dateTime
    dateFormat: MMMM d, yyyy
  total: 
    expression: 'BALANCE DUE USD \$(\d+\.\d+)'
    type: decimal
  subTotal: 
    expression: 'SUB TOTAL USD \$(\d+\.\d+)'
    type: decimal
  tax: 
    expression: 'SALES TAX USD \$(\d+\.\d+)'
    type: decimal
  sourceName:
    expression: Stack Exchange, Inc.
    static: true
  sourceEmail:
    expression: billing@stackoverflow.com
    static: true
  currency:
    expression: USD
    static: true
lines:
  start: 
    expression: QUANTITY\s+DESCRIPTION\s+UNIT PRICE\s+TOTAL
  end: 
    expression: 'SUB TOTAL USD'
  line: 
    expression: '^\s*(?<quantity>\d+.\d\d)\s+(?<description>\w+.*)\s+USD \$(?<unitPrice>\d+\.\d\d)\s+USD \$(?<amount>\d+\.\d\d)$'
  types:
    quantity: decimal
    unitPrice: decimal
    amount: decimal
